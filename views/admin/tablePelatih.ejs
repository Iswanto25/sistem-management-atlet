<div class="card">
    <div class="card-header">
        <h4>Data pelatih</h4>
    </div>
    <div class="card-body table-responsive-xl">
        <div class="row">
            <div class="col-md-12">
                <% if (messages.success) { %>
                    <div class="alert alert-success" role="alert"><%- messages.success %>
                            <button type="button" class="close" data-bs-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                    </div>
                    <% } %>
                        <% if (messages.error) { %>
                            <div class="alert alert-danger" role="alert"><%- messages.error %>
                                    <button type="button" class="close" data-bs-dismiss="alert" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                            </div>
                            <% } %>
            </div>
            <div class="col-md-12"></div>
        </div>
        <table class="table table-striped table-bordered" id="tablePelatih">
            <thead class="table-dark">
                <tr>
                    <th>No</th>
                    <th>NIK</th>
                    <th>Nama</th>
                    <th>Tempat Lahir</th>
                    <th>Tanggal Lahir</th>
                    <th>Jenis Kelamin</th>
                    <th>Alamat</th>
                    <th>Kecamatan</th>
                    <th>Jabatan</th>
                    <th>Cabor</th>
                    <th>Tahun Gabung</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <% if(pelatih.length){ for(var i=0; i< pelatih.length; i++){%>
                        <th scope="row" class="text-center">
                            <%= (i+1)%>
                        </th>
                        <td>
                            <%=pelatih[i].nik%>
                        </td>
                        <td>
                            <%=pelatih[i].nama%>
                        </td>
                        <td>
                            <%=pelatih[i].tempat_lahir%>
                        </td>
                        <td>
                            <%=pelatih[i].tgl_lahir%>
                        </td>
                        <td>
                            <%=pelatih[i].jns_kelamin%>
                        </td>
                        <td>
                            <%=pelatih[i].alamat%>
                        </td>
                        <td>
                            <%=pelatih[i].kecamatan%>
                        </td>
                        <td>
                            <%=pelatih[i].cabor%>
                        </td>
                        <td>
                            <%=pelatih[i].tgl_gabung%>
                        </td>
                        <td>
                            <%=pelatih[i].jabatan%>
                        </td>
                        <td>
                            <div class="btn-group">
                                <button href="javascript:void(0);" class="btn btn-sm btn-success edit"
                                    data-id="<%=pelatih[i].id_pelatih%>" data-nama="<%=pelatih[i].nama%>"
                                    data-nik="<%=pelatih[i].nik%>" data-tempat_lahir="<%=pelatih[i].tempat_lahir%>"
                                    data-tgl_lahir="<%=pelatih[i].tgl_lahir%>"
                                    data-jns_kelamin="<%=pelatih[i].jns_kelamin%>" data-alamat="<%=pelatih[i].alamat%>"
                                    data-kecamatan="<%=pelatih[i].kecamatan%>" data-cabor="<%=pelatih[i].cabor%>"
                                    data-tgl_gabung="<%=pelatih[i].tgl_gabung%>" data-jabatan="<%=pelatih[i].jabatan%>">
                                    <i class="fa-solid fa-pen-clip"></i>
                                </button>
                                <button href="javascript:void(0);" class="btn btn-sm btn-danger delete" type="button"
                                    data-id="<%= pelatih[i].id_pelatih %>">
                                    <i class="fa-solid fa-delete-left"></i>
                                </button>
                            </div>
                        </td>
                </tr>
                <%} }else{ %>
                    <tr>
                        <td colspan="12">
                            <div class="alert alert-danger" role="alert">
                                Data Kosong
                                <a class="btn btn-danger btn-xs" style="text-decoration: none" data-bs-toggle="modal"
                                    data-bs-target="#addPelatih">Tambah Data</a>
                            </div>
                        </td>
                    </tr>
                    <% } %>
            </tbody>
        </table>
    </div>
    <div class="card-footer">
        <a data-bs-target="#addpelatih" data-bs-toggle="modal" type="button" class="btn btn-secondary btn-sm"> Tambah
            pelatih</a>

    </div>
</div>
<script>
    $(document).ready(function () {
        $('#tablePelatih').DataTable();
    });
</script>
<script>
    $(document).ready(function () {
        $("#tablePelatih").on("click", ".edit", function () {
            var id_pelatih = $(this).data("id");
            var nama = $(this).data("nama");
            var nik = $(this).data("nik");
            var tempat_lahir = $(this).data("tempat_lahir");
            var tgl_lahir = $(this).data("tgl_lahir");
            var jns_kelamin = $(this).data("jns_kelamin");
            var alamat = $(this).data("alamat");
            var kecamatan = $(this).data("kecamatan");
            var cabor = $(this).data("cabor");
            var tgl_gabung = $(this).data("tgl_gabung");
            var jabatan = $(this).data("jabatan");
            $("#editpelatih").modal("show");
            $(".id_pelatih").val(id_pelatih);
            $(".nama").val(nama);
            $(".nik").val(nik);
            $(".tempat_lahir").val(tempat_lahir);
            $(".tgl_lahir").val(tgl_lahir);
            $(".jns_kelamin").val(jns_kelamin);
            $(".alamat").val(alamat);
            $(".kecamatan").val(kecamatan);
            $(".cabor").val(cabor);
            $(".tgl_gabung").val(tgl_gabung);
            $(".jabatan").val(jabatan);
        });
        $("#tablePelatih").on("click", ".delete", function () {
            var id_pelatih = $(this).data("id");
            $("#deletePelatih").modal("show");
            $(".product_id2").val(id_pelatih);
        });
    });
</script>